<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
   xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
   layout:decorate="~{fragment/item/item_layout}">
<!-- 연결해야할 외부 CSS파  -->
<th:block layout:fragment="content_css">
<link rel="stylesheet" href="/css/item/item_header.css">

</th:block>

<th:block layout:fragment="content">
	<div class="row justify-content-center mx-auto" style="width: 80%;">
		<div class="col">
			<!--	임시		-->
			<div class="row">
				<div class="col">
					<form action="/buy/buyItem" method="post">
						<input type="number" id="numOfPeople" name="reservedPeopleNum" value="1">명
						<input type="hidden" th:value="${buyDetailVO.departDate}" name="departDate">
						<input type="hidden" th:value="${buyDetailVO.arriveDate}" name="arriveDate">
						<input type="hidden" th:value="${itemDetail[0][0]['ITEM_PRICE']}" name="buyDPrice">
						<input type="hidden" id="itemCode" th:value="${itemDetail[0][0]['ITEM_CODE']}" name="itemCode">
						<input type="hidden" th:value="${itemDetail[0][0]['AREA_CODE']}" name="areaCode">
						<input type="submit" value="구매">
					</form>
				</div>
				<div class="col">
					<input type="button" value="장바구니" onclick="addCartAJAX();">
				</div>
			</div>

		
		<!-- 상품 제목  -->
			<div class="row">
				<div class="col">
					<h3>[[${itemDetail[0][0]['ITEM_TITLE']}]]</h3>
				</div>
			</div>
		
	<!-- 상품이미지 + 상품 제목 간단설명  -->
	
			<div class="row">
				<div class="col">
				
					<div id="itemLIstMainImg" class="carousel slide" data-bs-ride="carousel">
						<div class="carousel-inner">

							<th:block th:each="img,state : ${itemImg}">
								<div th:classappend="${state.index} == 0 ? 'active' : '' " class="carousel-item" data-bs-interval="2000">
									<img th:src="@{/img/item/itemImg/} + ${img['ITEM_IMG_ATTACHED_NAME']}"
										class="d-block rounded" alt="슬라이드이미지">
								</div>
							</th:block>

						</div>
						<button class="carousel-control-prev" type="button"
							data-bs-target="itemLIstMainImg" data-bs-slide="prev">
							<span class="carousel-control-prev-icon" aria-hidden="true"></span>
							<span class="visually-hidden">Previous</span>
						</button>
						<button class="carousel-control-next" type="button"
							data-bs-target="itemLIstMainImg" data-bs-slide="next">
							<span class="carousel-control-next-icon" aria-hidden="true"></span>
							<span class="visually-hidden">Next</span>
						</button>
					</div>
					
				</div>
				
				
				<div class="col">
					<div class="row">
						<span>[[${itemDetail[0][0]['ITEM_TITLE']}]]</span>
					</div>
					
					
					<div class="row">
						<span>[[${itemDetail[0][0]['AREA_KOR_NAME']}]]</span>
					</div>
					
					
					<div class="row">
						<span>[[${itemDetail[0][0]['ITEM_PRICE']}]]</span>
					</div>
					<div class="row">
						<span>[[${itemDetail[0][0]['HBT_AIRLINE_NAME']}]]</span>
					</div>

					<div class="row">
						<input type="button" value="예약하기">				
					</div>
					
				
				</div>
			</div>
			
			
			<!-- 주요 일정 & 가격 -->


			<div class="row my-3">
				<div class="col">
					<div class="accordion" id="accordionPanelsStayOpenExample">
						<th:block th:each="number, state : ${#numbers.sequence(0 , day - 1)}">

							<div class="accordion-item">
								<h2 class="accordion-header">
									<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
											th:data-bs-target="${'#panelsStayOpen-collapseOne'} + ${state.count}"
											aria-expanded="false" th:onclick="getImgs([[${state.index}]])"
											aria-controls="panelsStayOpen-collapseOne +  + ${state.count}">
										[[${state.count}]]일차 일정
									</button>
								</h2>
								<div th:id="panelsStayOpen-collapseOne + ${state.count}" class="accordion-collapse collapse">
									<div class="accordion-body text-center">
										<div class="row mb-3 dailyPlanDivs">
											<th:block th:each="dailyPlan, index : ${itemDetail.get(state.index)}">
												<th:block th:if="${index.index == 0}">
													<div class="col">
														호텔이미지
													</div>
													<div class="col">
														<div class="row mb-3">
															<input type="hidden" th:value='${dailyPlan["HBT_HOTEL_CODE"]}'>
															<div class="col">이용호텔 : </div>
															<div class="col">[[${dailyPlan["HBT_HOTEL_NAME"]}]]</div>
															<div class="col">[[${dailyPlan["HBT_HOTEL_GRADE"]} + 성]]</div>
														</div>
														<div class="row mb-3">
															<div class="row">[[${dailyPlan["HBT_HOTEL_INTRO"]}]]</div>
														</div>
													</div>
												</th:block>


												<div class="row mb-3">
													<div class="col">
														투어이미지
													</div>
													<div class="col">
														<div class="row mb-3">
															<input type="hidden" th:value="${dailyPlan['HBT_TOUR_ITEM_CODE']}">
															<div class="col">[[${dailyPlan["HBT_TOUR_ITEM_NAME"]}]]</div>
														</div>
														<div class="row mb-3">
															<div class="row">[[${dailyPlan["HBT_TOUR_ITEM_NAME"]}]]</div>
														</div>
													</div>
												</div>
											</th:block>
										</div>
									</div>
								</div>
							</div>

						</th:block>
					</div>
				
				

					
					
				</div>
			</div>
			

		</div>
	</div>
</th:block>

<!--  연결해야할 외부 js 파일 -->
<th:block layout:fragment="content_js">
<script type="text/javascript" src="/js/content/item/tour_item_detail.js"></script>
</th:block>
</html>