<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
   xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
   xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
   layout:decorate="~{fragment/member/member_layout}">
   
<!-- ì—°ê²°í•´ì•¼ í•  ì™¸ë¶€ CSSíŒŒì¼ -->   
<th:block layout:fragment="content_css">
<link rel="stylesheet" href="/css/content/member/myPage/diy_detail.css">
</th:block>

<!-- ë³¸ë¬¸ ë‚´ìš© -->   
<th:block layout:fragment="member_content">

<div class="container">

<div class="row mb-4 mt-2">
	<div class="col title">
		ìƒì„¸ì •ë³´
	</div>
</div>


<!--  ì˜ˆì•½í•œ ìƒí’ˆ ê°„ëµí•œ ì •ë³´  -->

<!-- ìƒë‹¨ ë°” -->
<div class="row upper-box mb-3">
	<div class="col-3 text-end">ì˜ˆì•½ì¼ì  : <span class="bold">[[${tourDetail.diyTourBuyDate}]]</span></div>
	<div class="col-9">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ì˜ˆì•½ë²ˆí˜¸ : <span class="bold" style="text-decoration:underline; color: #ffd000;">[[${tourDetail.hbtDiyCode}]]</span></div>
</div>
 
<div class="row mb-1">
	<div class="col title-md">
		âœˆï¸&nbsp;&nbsp;ì˜ˆì•½ ìƒí’ˆ 
	</div>
</div> 
 
<div class="row">
	<div class="col mb-2 mt-4">
		<table class="table table-reservation">
			<colgroup>
				<col width="15%">
				<col width="15">
				<col width="15%">
				<col width="20%">
				<col width="20%">
				<col width="15%">
			</colgroup>
			<thead class="text-center">
				<tr>
					<td>ì—¬í–‰êµ­ê°€</td>
					<td>í•­ê³µì‚¬</td>
					<td>ì¶œë°œì¼ì</td>
					<td>ë„ì°©ì¼ì</td>
					<td>ì—¬í–‰ê¸°ê°„</td>
					<td>ì—¬í–‰ìƒíƒœ</td>
				</tr>
			</thead>
			
			<tbody>
				<tr class="table-tr">
		            <td class="text-center">
			            <div style="color: #131518; font-weight:bolder;">[[${tourDetail.tourAreaVO.areaKorName}]]</div>
		            </td>
		            <td>
			        	<div class="col">
							<img th:src="${'/img/item/airlineIcon/' + tourDetail.airlineVO.hbtAirlineIcon}" alt="Airline Icon">
			        		<span>[[${tourDetail.airlineVO.hbtAirlineName}]]</span>
			        	</div>
			        </td>
			        <td th:text="${tourDetail.departDate}" class="date-td"></td>
			        <td th:text="${tourDetail.arriveDate}" class="date-td"></td>
		        	<td>
		        	[[${tourDetail.traverPeriod - 1}]]ë°• [[${tourDetail.traverPeriod}]]ì¼
		        	</td>
			        <td>
				        <div>
				        	<span id="statusCode" style="font-weight: bolder;" th:value="${tourDetail.buyStatusCode}">[[${tourDetail.buyStateVO.buyStatusName}]]</span>
				        </div>
				        <div id="cancelBtn">
				        	<button class="btn btn-outline-secondary btn-sm mt-2 cancelBtn"
				        	th:if="${tourDetail.buyStatusCode == '1'}"
				        	th:onclick="cancel_reservation([[${tourDetail.buyStatusCode}]])">ì˜ˆì•½ì·¨ì†Œ</button>
				        </div>
				        <div id="reviewBtn">
				        	<a th:href="@{/myPage/checkMyReview(memCode=${tourDetail.memCode})}">
				        		<button class="btn btn-outline-secondary btn-sm mt-2 reviewBtn" 
				        		th:if="${tourDetail.buyStatusCode == '2'}">ë¦¬ë·°ì‘ì„±</button>
				        	</a>
				        </div>
			        </td>
				</tr>
			</tbody>
			 
		</table>

	</div>
</div>



<!-- ê²°ì œ ê¸ˆì•¡  -->
 
<div class="row">
	<div class="col text-end">
		<span class="total-price-tit">ì´ ê²°ì œ ê¸ˆì•¡</span>
		<span class="total-price">[[${#numbers.formatCurrency(tourDetail.totalPrice).substring(1)}]] ì›</span>
	</div>
</div>


<!-- ì˜ˆì•½ì ì •ë³´ -->
<div class="row mb-3">
	<div class="col title-md">
		ğŸ‘¤&nbsp;&nbsp;ì˜ˆì•½ì ì •ë³´
	</div>
</div>
	
<div class="row">
	<div class="col mb-3">
		<table class="table personal-info">
			<colgroup>
				<col width="20%">
				<col width="*">
			</colgroup>
			<tbody>
				<tr>
					<th>ì´ë¦„</th>
					<td>[[${memInfo.memName}]]</td>
				</tr>
				<tr>
				    <th>ì—°ë½ì²˜</th>
				    <td>
				        <span th:text="${#strings.length(memInfo.memberDetailVO.memDTell) == 11 ? 
				                        #strings.substring(memInfo.memberDetailVO.memDTell, 0, 3) + '-' +
				                        #strings.substring(memInfo.memberDetailVO.memDTell, 3, 7) + '-' +
				                        #strings.substring(memInfo.memberDetailVO.memDTell, 7) :
				                        #strings.substring(memInfo.memberDetailVO.memDTell, 0, 3) + '-' +
				                        #strings.substring(memInfo.memberDetailVO.memDTell, 3, 6) + '-' +
				                        #strings.substring(memInfo.memberDetailVO.memDTell, 6) }"></span>
				    </td>
				</tr>
				<tr>
					<th>ì£¼ì†Œ</th>
					<td>
						[[${memInfo.memberDetailVO.memDAddr}]]
						[[${memInfo.memberDetailVO.memDAddr2}]]
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>
	



<!-- ì¼ìë³„ ì¼ì •  -->
<div class="row mb-3">
	<div class="col title-md">
	ğŸ—“&nbsp;&nbsp;ì—¬í–‰ ì¼ìë³„ ì˜ˆì•½ ì •ë³´ 
	</div>
</div>


<th:block>
	<table class="table day-info-table mt-3 mb-3">
	    <thead>
	        <tr>
	            <td>Day</td>
	            <td>í˜¸í…”</td>
	            <td>íˆ¬ì–´</td>
	        </tr>
	    </thead>
	    
	     <tbody>
				<th:block th:each="detail : ${resultList}">
					<tr>
				   		<td style="color: #ffd000;">[[${detail.hbtDiyDay}]] ì¼ì°¨ </td>
				    	<td th:if="${detail.hotelList == null or #lists.size(detail.hotelList) == 0}"><i class="bi bi-dash-lg" style="color:#d6d6d6;"></i></td>
				    	<td th:if="${detail.hotelList != null and #lists.size(detail.hotelList) != 0}" style="font-weight: bolder;">[[${detail.hotelList[0].hbtHotelName}]]</td>
				    	<td th:if="${detail.tourItemList == null or #lists.size(detail.tourItemList) == 0}"><i class="bi bi-dash-lg" style="color:#d6d6d6;"></i></td>
				    	<td th:if="${detail.tourItemList != null and #lists.size(detail.tourItemList) != 0}" style="font-weight: bolder;">[[${detail.tourItemList[0].hbtTourItemName}]]</td>
					</tr>
				</th:block>
		</tbody>
	</table>
</th:block>

<!-- ì˜ˆì•½ ë³„ íˆ¬ì–´, í˜¸í…” ì •ë³´ -->
<div class="row mb-3">
	<div class="col title-md">
	ğŸ¨&nbsp;&nbsp;ì˜ˆì•½ í˜¸í…” ì •ë³´ 
	</div>
</div>

<div class="row info-row">
 <th:block th:each="diy : ${hotelInfoList}">
    <th:block th:each="diyDetail, detailStat : ${diy.diyDetailList}">
      <!-- Text data part -->
      <div class="col-md-7 mb-3 info">
        <table class="table info-table">
        	<tbody>
	            <tr>
	            	<th>ì´ë¦„ : </th>
	            	<td th:text="${diyDetail.hotelList[0].hbtHotelName}"></td>
	            </tr>
	            <tr>
	            	<th>í‰ì  : </th>
	            	<td><span style="font-weight: bolder; color: #ffd000;">[[${diyDetail.hotelList[0].hbtHotelGrade}]]</span> / 5 </td>
	            </tr>
	            <tr>
	            	<th>í•´ë‹¹ êµ­ê°€ : </th>
	            	 <td th:text="${diy.tourAreaVO.areaKorName}"></td>
	            </tr>
	            <tr>
	            	<th>1ë°•ë‹¹ ê°€ê²© : </th>
	            	<td>
	               	[[${#numbers.formatCurrency(diyDetail.hotelList[0].hbtHotelPrice).substring(1)}]] ì›
	                </td>
	            </tr>
	        <tbody>
    	</table>
      </div>
      
      <!-- Image slider part -->
  
      <div class="col-md-5 mb-3">
        <div th:id="'carouselControls' + ${detailStat.index}" class="carousel slide" data-bs-ride="carousel">
          <div class="carousel-inner">
            <th:block th:each="hotelImg, iterStat : ${diyDetail.hotelList[0].hotelImgList}">
              <div class="carousel-item" th:classappend="${iterStat.first} ? active : ''">
                <img th:src="${'/img/item/hotel/' + hotelImg.hbtHotelAttechedFileName}" class="d-block w-100" alt="ì˜ˆì•½ í˜¸í…” ì´ë¯¸ì§€">
              </div>
            </th:block>
          </div>
          <button class="carousel-control-prev" type="button" data-bs-target="'#carouselControls' + ${detailStat.index}" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Prev</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="'#carouselControls' + ${detailStat.index}" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>
      </div>
      
    </th:block>
  </th:block>
</div>


<div class="row">
	<th:block th:each="diy : ${hotelInfoList}">
	    <th:block th:each="diyDetail, detailStat : ${diy.diyDetailList}">
	      <div class="col-md-6 mb-3 under">
	        <table class="table under-table">
	        	<tbody>
		             <tr>
		            	<th>ì¶”ê°€ ì •ë³´ : </th>
		            	 <td>
							<div class="scrollable-text">[[${diyDetail.hotelList[0].hbtHotelIntro}]]</div>
		            	 </td>
		            </tr>
		        <tbody>
	    	</table>
	      </div>
		</th:block>
	  </th:block>
</div>


<!-- ì„  -->
<div class="mt-5 mb-4">
	<hr class="line">
</div>



<div class="row mb-3">
	<div class="col title-md">
	ğŸ˜&nbsp;&nbsp;ì˜ˆì•½ íˆ¬ì–´ ì •ë³´ 
	</div>
</div>



<div class="row info-row">
 <th:block th:each="diy : ${tourInfoList}">
    <th:block th:each="diyDetail, detailStat : ${diy.diyDetailList}">
      <!-- Text data part -->
      <div class="col-md-7 mb-3 info">
        <table class="table info-table">
        	<tbody>
	            <tr>
	            	<th>ì´ë¦„ : </th>
	            	<td th:text="${diyDetail.tourItemList[0].hbtTourItemName}"></td>
	            </tr>
	            <tr>
	            	<th>íˆ¬ì–´ êµ­ê°€ : </th>
	            	 <td th:text="${diy.tourAreaVO.areaKorName}"></td>
	            </tr>
	            <tr>
	            	<th>íˆ¬ì–´ ì†Œìš”ì‹œê°„ : </th>
	            	<td th:text="${diyDetail.tourItemList[0].hbtTourItemRunTime}"></td>
	            </tr>
	            <tr>
	            	<th>1ì¸ ì°¸ì—¬ ê°€ê²© : </th>
	            	<td>
	                [[${#numbers.formatCurrency(diyDetail.tourItemList[0].hbtTourItemPrice).substring(1)}]] ì›
	                </td>
	            </tr>
	        <tbody>
    	</table>
      </div>
      
      <!-- Image slider part -->
      <div class="col-md-5 mb-3">
        <div th:id="'carouselControl' + ${detailStat.index}" class="carousel slide" data-bs-ride="carousel">
          <div class="carousel-inner">
            <th:block th:each="tourImg, iterStat : ${diyDetail.tourItemList[0].tourItemImgList}">
              <div class="carousel-item" th:classappend="${iterStat.first} ? active : ''">
                <img th:src="${'/img/item/tourItem/' + tourImg.hbtTourItemAttechedFileName}" class="d-block w-100" alt="ì˜ˆì•½ íˆ¬ì–´ ì´ë¯¸ì§€">
              </div>
            </th:block>
          </div>
          <button class="carousel-control-prev" type="button" data-bs-target="'#carouselControl' + ${detailStat.index}" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Prev</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="'#carouselControl' + ${detailStat.index}" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>
      </div>
      
      
    </th:block>
  </th:block>
</div>

	<div class="row">
		<th:block th:each="diy : ${tourInfoList}">
		    <th:block th:each="diyDetail, detailStat : ${diy.diyDetailList}">
		      <div class="col-md-6 mb-3 under">
		        <table class="table under-table">
		        	<tbody>
			            <tr>
			            	<th>ì¶”ê°€ ì •ë³´ : </th>
			            	<td>
								<div class="scrollable-text">[[${diyDetail.tourItemList[0].hbtTourItemIntro}]]</div>
			            	</td>
			            </tr>
			        <tbody>
		    	</table>
		      </div>
			</th:block>
		  </th:block>
	</div>

	<!-- ì„  -->
	<div class="mt-5 mb-4">
		<hr class="line">
	</div>

	<!-- ìœ ì˜ ì‚¬í•­ -->
	<div class="info-under">
		<ul>
			<li>
				ì˜ˆì•½ì·¨ì†ŒëŠ” [ê²°ì œì™„ë£Œ] ìƒíƒœê¹Œì§€ ê°€ëŠ¥í•©ë‹ˆë‹¤. [ì˜ˆì•½ì™„ë£Œ]ìƒíƒœëŠ” ê³ ê°ì„¼í„°ë¡œ ë¬¸ì˜ ë¶€íƒë“œë¦½ë‹ˆë‹¤.
			</li>
		</ul>
	</div>

	<div class="offset-5 col-2 d-grid mb-5">
		 <a class="btn btn-yellow-line text-center" th:href="@{/myPage/checkDiyReservation}">
    	    ëª©ë¡
   		</a>
	</div>

</div>


</th:block>

<!-- ì—°ê²°í•´ì•¼ í•  ì™¸ë¶€ jsíŒŒì¼ -->   
<th:block layout:fragment="content_js">
	<script type="text/javascript" src="/js/content/member/myPage/diy_detail.js"></script>
</th:block>



</html>